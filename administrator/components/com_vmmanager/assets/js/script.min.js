!function(e){function i(e){return"number"!=typeof e?"":e>=1e9?(e/1e9).toFixed(2)+" GB":e>=1e6?(e/1e6).toFixed(2)+" MB":(e/1e3).toFixed(2)+" KB"}var n=e("#upload ul");e("#drop a").click(function(){e(this).parent().find("input").click()}),e("#upload").fileupload({dropZone:e("#drop"),add:function(o,t){var d=t.files[0],a=d.name,r=a.substr(a.lastIndexOf(".")+1),c=["png","jpg","ico","gif","bmp"],p=c.indexOf(r);if(!(0>p)){var s=e('<li class="working"><div id="media-parent-process"><div id="media-process"></div></div><p></p></li>');s.find("p").text(t.files[0].name).append("<i>( "+i(t.files[0].size)+" )</i>"),t.context=s.appendTo(n);{t.submit().complete(function(){s.remove()})}}},progress:function(e,i){var n=parseInt(i.loaded/i.total*100,10);console.log(n),i.context.find("#media-process").css("width",n+"%").change(),100==n&&i.context.removeClass("working")},always:function(){var i=e(".media-queue").find("li").length;1==i&&e(".rf-data").click()},fail:function(e,i){i.context.addClass("error")}}),e(document).on("drop dragover",function(e){e.preventDefault()})}(jQuery);