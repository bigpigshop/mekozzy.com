function colorPicker(){jQuery(".input-color").each(function(){var e=jQuery(this).val()?"#"+jQuery(this).val():"transparent";jQuery(this).parent().children("span.color-value").css("background-color",e),jQuery(this).colpick({layout:"full",submit:1,colorScheme:"dark",onChange:function(e,t,i,n,o){jQuery(n).parent().children("span.color-value").css("background-color","#"+t),o||jQuery(n).val(t)},onSubmit:function(e,t,i,n){jQuery(n).parent().children("span.color-value").css("background-color","#"+t),jQuery(n).colpickHide()}}).keyup(function(){jQuery(this).colpickSetColor(this.value)})})}function showAlert(e){var t='<div class="overlay-alert"></div><div id="alert-popup"><h2>Are You Sure?<i class="opc-iconcancel-1" onclick="hideAlert()"></i></h2><div><p>Are you sure you want to delete this module?</p></div><div class="action-alert"><span class="alert-cancel">Cancel</span><span class="alert-ok" id="'+e+'">Delete</span></div>';jQuery(t).appendTo(jQuery("body"));var i=jQuery(window).width(),n=jQuery(window).height();jQuery("#alert-popup").css({left:(i-300)/2,display:"block",top:(n-225)/2})}function hideAlert(){jQuery(".overlay-alert").remove(),jQuery("#alert-popup").remove(),jQuery(".grid-stack-item").removeClass("remove-wait")}!function(e){e(document).ready(function(){e("#popupHeader").find("li").click(function(){if(!e(this).hasClass("active")){e("#popupHeader").find("li").removeClass("active"),e(this).addClass("active"),e("#popupItem").children("div").removeClass("active");var t=e(this).attr("data");e(t).addClass("active")}}),colorPicker(),e("#example-color").find(".example-color").click(function(){var t=e(this).attr("title-bg"),i=e(this).attr("title-cl"),n=e(this).attr("title-size"),o=e(this).attr("title-font"),a=e(this).attr("content-bg"),l=e(this).attr("content-cl"),r=e(this).attr("content-size"),s=e(this).attr("content-font"),c=e("form[name=styleForm]");c.find("input[name=titleBg]").val(t),c.find("input[name=titleTxtCl]").val(i),c.find("input[name=titleTxtSize]").val(n),c.find("select[name=titleTxtFont]").val(o),c.find("input[name=contentBg]").val(a),c.find("input[name=contentTxtCl]").val(l),c.find("input[name=contentTxtSize]").val(r),c.find("select[name=contentTxtFont]").val(s),colorPicker()}),e("#popupBottom").find(".closePopup").click(function(){closePopup()}),e("#popupBottom").find(".savePopup").click(function(){if(!e(this).hasClass("save")){e(this).addClass("save"),e("#popupContent").append('<div id="loadajax"></div>'),e("#popupContent").find("#loadajax").height(jQuery("#popupContent").height());var t=e(this).attr("data-file"),i={};i.file=t,i.color=jQuery("form[name=styleForm]").serializeFormJSON(),i.options=jQuery("form[name=optionForm]").serializeFormJSON(),console.log(jQuery("form[name=optionForm]").serializeFormJSON()),jQuery.ajax({url:"index.php?option=com_vmmanager&task=saveJson",type:"POST",data:i,success:function(t){"1"==t&&(e("#popupBottom").find(".savePopup").removeClass("save"),e("#popupContent").find("#loadajax").remove())}})}}),e("ul.privateItem").sortable(),e("ul.privateItem").on("sortupdate",function(){var t=e(this).sortable("toArray",{attribute:"sort-name"}),i=e("input[name=sortValue]").val();i=i.split("|");var n={};e.each(t,function(e,t){n[t]=i[e]}),jQuery("input[name=sortBillTo]").val(JSON.stringify(n,null,"    "))}),e(".fieldItem.Shipto").find(".close-field").click(function(){showAlert("unpublish-yesorno"),e(this).addClass("unpublish")}),e(document).on("click","#unpublish-yesorno",function(){$field=e(".fieldItem.Shipto").find(".close-field.unpublish"),e("#popupContent").append('<div id="loadajax"></div>');var t=$field.attr("data");e.ajax({url:"index.php?option=com_vmmanager&task=unPublicField",type:"POST",data:{fieldid:t,type:"ST"},success:function(t){if("1"==t){var i=e(".close-field.unpublish").parent(".fieldItem").attr("old_sort"),n=e("input[name=sortValue]").val();n=n.split("|"),n.splice(parseInt(i),1),n=n.join("|");var n=e("input[name=sortValue]").val(n);e(".close-field.unpublish").parent(".fieldItem").remove(),e("ul.privateItem").trigger("sortupdate"),e("#popupContent").find("#loadajax").remove()}}}),hideAlert()}),e(".fieldItem.Billto").find(".close-field").click(function(){showAlert("unpublish-yesorno-BT"),e(this).addClass("unpublish")}),e(document).on("click","span.color-value",function(){console.log(1),e(this).parent().find("input").click()}),e(document).on("click","#unpublish-yesorno-BT",function(){$field=e(".fieldItem.Billto").find(".close-field.unpublish"),e("#popupContent").append('<div id="loadajax"></div>');var t=$field.attr("data");e.ajax({url:"index.php?option=com_vmmanager&task=unPublicField",type:"POST",data:{fieldid:t,type:"BT"},success:function(t){if("1"==t){var i=e(".close-field.unpublish").parent(".fieldItem").attr("old_sort"),n=e("input[name=sortValue]").val();n=n.split("|"),n.splice(parseInt(i),1),n=n.join("|");var n=e("input[name=sortValue]").val(n);e(".close-field.unpublish").parent(".fieldItem").remove(),e("ul.privateItem").trigger("sortupdate"),e("#popupContent").find("#loadajax").remove()}}}),hideAlert()}),e(".css-checkbox.dateType").click(function(){var t=e(this).closest(".row-val");t.find("input.dateType").not(this).prop("checked",!1),e(this).prop("checked",!0)}),e(".css-checkbox.timeType").click(function(){var t=e(this).closest(".row-val");t.find("input.timeType").not(this).prop("checked",!1),e(this).prop("checked",!0)}),e("input[name=banerTitle]").change(function(){var t=e(this).val().trim();""==t&&e(this).val("Banner Title")}),e(".jqte-html-input").jqte({placeholder:"Please, write your biography",change:function(){var t=e(".jqte_editor").html();e("textarea[name=htmlContent]").html(t)}}),e(document).on("click",".list-icon-val .opc-list-icons",function(){icon_val=jQuery(this).attr("data-icons"),e(".list-icon-val").find(".opc-list-icons").removeClass("cur_icon"),e(this).addClass("cur_icon"),e(this).parent().find("input[name=titleIcon]").val(icon_val)}),e(document).on("click",".overlay-alert",function(){hideAlert(),e(".fieldItem").find(".close-field").removeClass("unpublish")}),e(document).on("click","span.alert-cancel",function(){hideAlert(),e(".fieldItem").find(".close-field").removeClass("unpublish")}),e.fn.serializeFormJSON=function(){var t={},i=this.serializeArray();return e.each(i,function(){t[this.name]?(t[this.name].push||(t[this.name]=[t[this.name]]),t[this.name].push(this.value||"")):t[this.name]=this.value||""}),t}})}(jQuery);