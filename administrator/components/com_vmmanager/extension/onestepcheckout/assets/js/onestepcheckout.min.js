function checkTerm(){if(!$cache.inputTosElement.is(":checked")){var e=jQuery("#opc-confirm").offset().top;return jQuery("html, body").animate({scrollTop:e},1e3),alert(Joomla.JText._("SYSTEM_ONESTEPCHECKOUT_TERMS_ERROR")),!1}return!0}function checkFormCheckout(){var e=!1;if($cache.inputTosElement.length&&!$cache.inputTosElement.is(":checked")){var a=jQuery("#opc-confirm").offset().top;return jQuery("html, body").animate({scrollTop:a},1e3),alert(Joomla.JText._("SYSTEM_ONESTEPCHECKOUT_TERMS_ERROR")),e}if($cache.createAccountElement.is(":checked")){var t=!1;if(jQuery(".user-info").find("input").each(function(){if(""==jQuery(this).val()){var a=jQuery(this).offset().top;return jQuery(this).css("border-color","rgb(172, 42, 42)"),jQuery("html, body").animate({scrollTop:a-30},1e3),alert(Joomla.JText._("SYSTEM_ONESTEPCHECKOUT_ACCOUNT_SELECT")),t=!0,e}jQuery(this).css("border-color","#d0d0d0")}),t)return e}if(!jQuery("input[name=virtuemart_shipmentmethod_id]").is(":checked")){a=jQuery("#opc-shipment").offset().top;return jQuery("html, body").animate({scrollTop:a},1e3),alert(Joomla.JText._("SYSTEM_ONESTEPCHECKOUT_SHIPMENT_SELECT")),e}if(!jQuery("input[name=virtuemart_paymentmethod_id]").is(":checked")){a=jQuery("#opc-payment").offset().top;return jQuery("html, body").animate({scrollTop:a},1e3),alert(Joomla.JText._("SYSTEM_ONESTEPCHECKOUT_PAYMENT_SELECT")),e}var o=!1;if(jQuery("form[name=deliveryForm]").find("input.required").each(function(){if(""==jQuery(this).val()){var a=jQuery("#opc-delivery").offset().top;return jQuery(this).css("border-color","rgb(172, 42, 42)"),jQuery("html, body").animate({scrollTop:a},1e3),alert(Joomla.JText._("SYSTEM_ONESTEPCHECKOUT_DELIVERY_SELECT")),o=!0,e}jQuery(this).css("border-color","#d0d0d0")}),o)return e;var c=!1;if(jQuery("form[name=billToForm]").find("input.required").each(function(){if(""==jQuery(this).val()){var a=jQuery(this).offset().top;return jQuery(this).css("border-color","rgb(172, 42, 42)"),jQuery("html, body").animate({scrollTop:a-30},1e3),alert(Joomla.JText._("SYSTEM_ONESTEPCHECKOUT_BILLTO_SELECT")),c=!0,e}jQuery(this).css("border-color","#d0d0d0")}),c)return e;var r=jQuery("select.required[name=virtuemart_country_id]"),n=jQuery("select[name=virtuemart_state_id]");if(""==r.find("option:selected").val()){a=r.offset().top;return r.parent().find("a.chzn-single").css("border-color","rgb(172, 42, 42)"),jQuery("html, body").animate({scrollTop:a-30},1e3),alert(Joomla.JText._("SYSTEM_ONESTEPCHECKOUT_COUNTRY_SELECT")),e}if(r.parent().find("a.chzn-single").css("border-color","#d0d0d0"),n.find("optgroup").length){if(""==n.find("option:selected").val()){a=n.offset().top;return n.parent().find("a.chzn-single").css("border-color","rgb(172, 42, 42)"),jQuery("html, body").animate({scrollTop:a-30},1e3),alert(Joomla.JText._("SYSTEM_ONESTEPCHECKOUT_STATE_SELECT")),e}}else n.parent().find("a.chzn-single").css("border-color","#d0d0d0");if(!$cache.userShipToElement.is(":checked")){var s=!1;if(jQuery("form[name=shipToForm]").find("input.required").each(function(){if(""==jQuery(this).val()){var a=jQuery(this).offset().top;return jQuery(this).css("border-color","rgb(172, 42, 42)"),jQuery("html, body").animate({scrollTop:a-30},1e3),alert(Joomla.JText._("SYSTEM_ONESTEPCHECKOUT_BILLTO_SELECT")),s=!0,e}jQuery(this).css("border-color","#d0d0d0")}),s)return e;jQuery("select.required[name=shipto_virtuemart_country_id]");var i=jQuery("select[name=shipto_virtuemart_state_id]");if(""==r.find("option:selected").val()){a=r.offset().top;return r.parent().find("a.chzn-single").css("border-color","rgb(172, 42, 42)"),jQuery("html, body").animate({scrollTop:a-30},1e3),alert(Joomla.JText._("SYSTEM_ONESTEPCHECKOUT_COUNTRY_SELECT")),e}if(r.parent().find("a.chzn-single").css("border-color","#d0d0d0"),i.find("optgroup").length){if(""==i.find("option:selected").val()){a=i.offset().top;return i.parent().find("a.chzn-single").css("border-color","rgb(172, 42, 42)"),jQuery("html, body").animate({scrollTop:a-30},1e3),alert(Joomla.JText._("SYSTEM_ONESTEPCHECKOUT_STATE_SELECT")),e}}else i.parent().find("a.chzn-single").css("border-color","#d0d0d0")}function m(){jQuery("#wk_stripe_card_info").length?(jQuery("#wk_stripe_card_info").detach().appendTo("#opc-submit-button"),jQuery("#strp-pay-button").click()):jQuery("form[name=checkoutForm]").submit()}(OPCCMSMART.setAddress(),e=!0,$cache.createAccountElement.is(":checked"))?OPCCMSMART.register()&&m():1==$cache.checkminiumvalue&&m();return e}function checkUseShipTo(){$cache.userShipToElement.is(":checked")?jQuery("form#shipToForm").find("ul.opc-listShipTo").hide():jQuery("form#shipToForm").find("ul.opc-listShipTo").show(),getDesignOpc()}function validateEmail(e){return/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i.test(e)}function getDesignOpc(){var e=jQuery("#opc-wapper").width();e<=480?jQuery("#opc-wapper").addClass("media-480"):jQuery("#opc-wapper").removeClass("media-480");var a=parseInt(e)/12,t=0,o=0,c=0,r=0,n=0,s=0,i=0,m=0,u=0;jQuery("#opc-wapper").children(".opc-module").each(function(){var e=jQuery(this),p=parseInt(e.attr("data-x")),l=parseInt(e.attr("data-y")),d=parseInt(e.attr("data-width"));switch(e.width(a*d-20),e.width()<319?(e.addClass("opc-media-319"),e.removeClass("opc-media-400"),e.removeClass("opc-media-480"),e.removeClass("opc-media-600"),e.removeClass("opc-media-768")):e.width()<400?(e.addClass("opc-media-400"),e.removeClass("opc-media-319"),e.removeClass("opc-media-480"),e.removeClass("opc-media-600"),e.removeClass("opc-media-768")):e.width()<480?(e.addClass("opc-media-480"),e.removeClass("opc-media-319"),e.removeClass("opc-media-400"),e.removeClass("opc-media-600"),e.removeClass("opc-media-768")):e.width()<600?(e.addClass("opc-media-600"),e.removeClass("opc-media-319"),e.removeClass("opc-media-400"),e.removeClass("opc-media-480"),e.removeClass("opc-media-768")):e.width()<768?(e.addClass("opc-media-768"),e.removeClass("opc-media-319"),e.removeClass("opc-media-400"),e.removeClass("opc-media-480"),e.removeClass("opc-media-600")):(e.removeClass("opc-media-319"),e.removeClass("opc-media-400"),e.removeClass("opc-media-480"),e.removeClass("opc-media-600"),e.removeClass("opc-media-768")),t=e.outerHeight()+20,0==l&&e.css("top","0"),e.addClass("opc-width-"+d),p){case 0:switch(e.css("left","0"),d){case 3:e.css("top",o),o+=t;break;case 4:e.css("top",Math.max(o,c)),o=c=Math.max(o,c)+t;break;case 5:e.css("top",Math.max(o,c,r)),o=c=r=Math.max(o,c,r)+t;break;case 6:e.css("top",Math.max(o,c,r,n)),o=c=r=n=Math.max(o,c,r,n)+t;break;case 7:e.css("top",Math.max(o,c,r,n,s)),o=c=r=n=s=Math.max(o,c,r,n,s)+t;break;case 8:e.css("top",Math.max(o,c,r,n,s,i)),o=c=r=n=s=i=Math.max(o,c,r,n,s,i)+t;break;case 9:e.css("top",Math.max(o,c,r,n,s,i,m)),o=c=r=n=s=i=m=Math.max(o,c,r,n,s,i,m)+t;break;case 10:case 11:case 12:e.css("top",Math.max(o,c,r,n,s,i,m,u)),o=c=r=n=s=i=m=u=Math.max(o,c,r,n,s,i,m,u)+t}break;case 1:switch(e.css("left",1*a),d){case 3:e.css("top",Math.max(o,c)),o=c=Math.max(o,c)+t;break;case 4:e.css("top",Math.max(o,c,r)),o=c=r=Math.max(o,c,r)+t;break;case 5:e.css("top",Math.max(o,c,r,n));break;case 6:e.css("top",Math.max(o,c,r,n,s)),o=c=r=n=s=Math.max(o,c,r,n,s)+t;break;case 7:e.css("top",Math.max(o,c,r,n,s,i)),o=c=r=n=s=i=Math.max(o,c,r,n,s,i)+t;break;case 8:e.css("top",Math.max(o,c,r,n,s,i,m)),o=c=r=n=s=i=m=Math.max(o,c,r,n,s,i,m)+t;break;case 9:case 10:case 11:e.css("top",Math.max(o,c,r,n,s,i,m,u)),o=c=r=n=s=i=m=u=Math.max(o,c,r,n,s,i,m,u)+t}break;case 2:switch(e.css("left",2*a),d){case 3:e.css("top",Math.max(o,c,r)),o=c=r=Math.max(o,c,r)+t;break;case 4:e.css("top",Math.max(o,c,r,n)),o=c=r=n=Math.max(o,c,r,n)+t;break;case 5:e.css("top",Math.max(o,c,r,n,s)),o=c=r=n=s=Math.max(o,c,r,n,s)+t;break;case 6:e.css("top",Math.max(o,c,r,n,s,i)),o=c=r=n=s=i=Math.max(o,c,r,n,s,i)+t;break;case 7:e.css("top",Math.max(o,c,r,n,s,i,m)),o=c=r=n=s=i=m=Math.max(o,c,r,n,s,i,m)+t;break;case 8:case 9:case 10:e.css("top",Math.max(o,c,r,n,s,i,m,u)),o=c=r=n=s=i=m=u=Math.max(o,c,r,n,s,i,m,u)+t}break;case 3:switch(e.css("left",3*a),d){case 3:e.css("top",Math.max(c,r,n)),c=r=n=Math.max(c,r,n)+t;break;case 4:jopcChild.css("top",Math.max(c,r,n,s)),c=r=n=s=Math.max(c,r,n,s)+t;break;case 5:e.css("top",Math.max(c,r,n,s,i)),c=r=n=s=i=Math.max(c,r,n,s,i)+t;break;case 6:e.css("top",Math.max(c,r,n,s,i,m)),c=r=n=s=i=m=Math.max(c,r,n,s,i,m)+t;break;case 7:case 8:case 9:e.css("top",Math.max(c,r,n,s,i,m,u)),c=r=n=s=i=m=u=Math.max(c,r,n,s,i,m,u)+t}break;case 4:switch(e.css("left",4*a),d){case 3:e.css("top",Math.max(r,n,s)),r=n=s=Math.max(r,n,s)+t;break;case 4:e.css("top",Math.max(r,n,s,i)),r=n=s=i=Math.max(r,n,s,i)+t;break;case 5:e.css("top",Math.max(r,n,s,i,m)),r=n=s=i=m=Math.max(r,n,s,i,m)+t;break;case 6:case 7:case 8:e.css("top",Math.max(r,n,s,i,m,u)),r=n=s=i=m=u=Math.max(r,n,s,i,m,u)+t}break;case 5:switch(e.css("left",5*a),d){case 3:e.css("top",Math.max(n,s,i)),n=s=i=Math.max(n,s,i)+t;break;case 4:e.css("top",Math.max(n,s,i,m)),n=s=i=m=Math.max(n,s,i,m)+t;break;case 5:case 6:case 7:e.css("top",Math.max(n,s,i,m,u)),n=s=i=m=u=Math.max(n,s,i,m,u)+t}break;case 6:switch(e.css("left",6*a),d){case 3:e.css("top",Math.max(s,i,m)),s=i=m=Math.max(s,i,m)+t;break;case 4:case 5:case 6:e.css("top",Math.max(s,i,m,u)),s=i=m=u=Math.max(s,i,m,u)+t}break;case 7:switch(e.css("left",7*a),d){case 3:e.css("top",Math.max(i,m,u)),i=m=u=Math.max(i,m,u)+t;break;case 4:case 5:e.css("top",Math.max(i,m,u)),i=m=u=Math.max(i,m,u)+t}break;case 8:switch(e.css("left",8*a),d){case 3:case 4:e.css("top",Math.max(m,u)),m=u=Math.max(m,u)+t}break;case 9:switch(e.css("left",9*a),d){case 3:e.css("top",u),u+=t}}}),jQuery("#opc-wapper").height(Math.max(o,c,r,n,s,i,m,u)),jQuery("#opc-wapper").removeClass("render_")}function preventPaymentFormSubmit(){var e="form[name=paymentForm]",a="this.form.submit()";jQuery(e).length&&jQuery(e).html().indexOf(a)&&jQuery(e+" *").each(function(){jQuery.each(this.attributes,function(){this.specified&&this.value==a&&(this.value="")})})}!function(e){OPCCMSMART={get3form:function(){jQuery("#opc-wapper").hasClass("ajax-running")||showajax&&jQuery("#opc-wapper").addClass("ajax-running"),e.ajax({url:"?option=com_virtuemart&view=cart",type:"GET",dataType:"json",data:"opctask=get3form",cache:!1,success:function(a){a.error||(e("#opc-shipment").children(".opc-module-content").html(a.msg.shipment),e("#opc-payment").children(".opc-module-content").html(a.msg.payment),e("#opc-orderInfo").children(".opc-module-content").html(a.msg.order),e("#delivery_date_block").length||e("#opc-delivery").children(".opc-module-content").html(a.msg.delivery),jQuery("#opc-wapper").removeClass("ajax-running"),0==jQuery("#opc-orderInfo .order-product ul").length&&location.reload(),getDesignOpc(),preventPaymentFormSubmit())}})},selectShipment:function(){var a=e("form[name=shipmentForm]");showajax&&jQuery("#opc-wapper").addClass("ajax-running"),e.ajax({url:a.attr("action"),type:"POST",dataType:"JSON",cache:!1,data:a.serializeFormJSON(),success:function(e){e?OPCCMSMART.get3form():alert(Joomla.JText._("SYSTEM_ONESTEPCHECKOUT_SETSHIPMENT_ERROR"))}})},selectPayment:function(){var a=e("form[name=paymentForm]");showajax&&jQuery("#opc-wapper").addClass("ajax-running"),e.ajax({url:a.attr("action"),type:"POST",dataType:"JSON",cache:!1,data:a.serializeFormJSON(),success:function(e){e?alert(e):OPCCMSMART.get3form()}})},saveBillTo:function(){if($cache.userShipToElement.is(":checked")){var a=e("form[name=billToForm]");showajax&&jQuery("#opc-wapper").addClass("ajax-running"),e.ajax({url:a.attr("action"),type:"POST",cache:!1,dataType:"JSON",data:a.serializeFormJSON(),success:function(e){OPCCMSMART.get3form()}})}},saveShipTo:function(){if(!$cache.userShipToElement.is(":checked")){var a=e("form[name=shipToForm]");showajax&&jQuery("#opc-wapper").addClass("ajax-running"),e.ajax({url:a.attr("action"),type:"POST",dataType:"JSON",cache:!1,data:a.serializeFormJSON(),success:function(e){OPCCMSMART.get3form()}})}},useShipTo:function(a){a=a?1:0,showajax&&jQuery("#opc-wapper").addClass("ajax-running");var t={};$cache.userShipToElement.is(":checked")||(t.shipto=e("form[name=shipToForm]").serializeFormJSON()),t.billto=e("form[name=billToForm]").serializeFormJSON(),t.use_shipto=a,e.ajax({url:"?option=com_virtuemart&view=cart&opc_task=useShipto",type:"POST",dataType:"JSON",data:t,cache:!1,success:function(e){OPCCMSMART.get3form()}})},setAddress:function(){showajax&&jQuery("#opc-wapper").addClass("ajax-running");var a={};$cache.userShipToElement.is(":checked")||(a.shipto=e("form[name=shipToForm]").serializeFormJSON()),a.billto=e("form[name=billToForm]").serializeFormJSON(),e.ajax({url:"?option=com_virtuemart&view=cart&opc_task=setAddress",type:"POST",dataType:"JSON",data:a,async:!1,cache:!1,success:function(e){if(jQuery("#opc-wapper").removeClass("ajax-running"),""!=e.error)return console.log("1"),$cache.checkminiumvalue=!1,alert(e.error),!1;console.log("2"),$cache.checkminiumvalue=!0}})},updateProduct:function(){showajax&&jQuery("#opc-wapper").addClass("ajax-running");var a=e("form[name=priceForm]");e.ajax({url:"?option=com_virtuemart&view=cart&opc_task=updateProduct",type:"POST",dataType:"JSON",cache:!1,data:a.serializeFormJSON(),success:function(e){"undefined"!=typeof reload&&reload&&location.reload(),"true"==e?($cache.checkminiumvalue=!0,OPCCMSMART.get3form()):(alert(Joomla.JText._("SYSTEM_ONESTEPCHECKOUT_CANNOT_UPDATE_PRO")),jQuery("#opc-wapper").removeClass("ajax-running"))}})},deleteProduct:function(a){showajax&&jQuery("#opc-wapper").addClass("ajax-running");e("form[name=priceForm]");e.ajax({url:"?option=com_virtuemart&view=cart&opc_task=deleteProduct",type:"GET",dataType:"JSON",cache:!1,data:"pid="+a,success:function(e){"undefined"!=typeof reload&&reload&&location.reload(),"true"==e?OPCCMSMART.get3form():(alert(Joomla.JText._("SYSTEM_ONESTEPCHECKOUT_CANNOT_UPDATE_PRO")),jQuery("#opc-wapper").removeClass("ajax-running"))}})},saveCouponCode:function(a){showajax&&jQuery("#opc-wapper").addClass("ajax-running"),e.ajax({url:"?option=com_virtuemart&view=cart&opc_task=saveCouponCode",type:"GET",dataType:"JSON",cache:!1,data:"coupon="+a,success:function(e){"true"==e?OPCCMSMART.get3form():(alert(e),jQuery("#opc-wapper").removeClass("ajax-running"))}})},loginForm:function(){var a=e("form[name=logInForm]");return user=a.find("input[name=username]").val(),pass=a.find("input[name=password]").val(),""==user?(a.find("input[name=username]").focus(),a.find("input[name=username]").css("border-color","#ff6262"),!1):(a.find("input[name=username]").css("border-color","#ccc"),""==pass?(a.find("input[name=password]").focus(),a.find("input[name=password]").css("border-color","#ff6262"),!1):(a.find("input[name=password]").css("border-color","#ccc"),void e.ajax({url:a.attr("action"),type:"POST",data:a.serializeFormJSON(),cache:!1,dataType:"JSON",error:function(e,a){"parsererror"&&location.reload()},success:function(e){"true"==e.data?location.reload():"notactive"==e.data?($cache.noticeElement.html(Joomla.JText._("SYSTEM_ONESTEPCHECKOUT_LOGIN_ERROR_ACTIVE")),$cache.noticeElement.fadeIn(),getDesignOpc()):($cache.noticeElement.html(Joomla.JText._("SYSTEM_ONESTEPCHECKOUT_LOGIN_ERROR")),$cache.noticeElement.fadeIn(),getDesignOpc())}})))},logoutForm:function(){var a=e("form[name=logInForm]");e.ajax({url:a.attr("action"),type:"POST",data:a.serializeFormJSON(),cache:!1,dataType:"JSON",error:function(e,a){"parsererror"&&location.reload()},success:function(e){"true"==e.data?location.reload():$cache.noticeElement.html(Joomla.JText._("SYSTEM_ONESTEPCHECKOUT_LOGOUT_ERROR"))}})},register:function(){var a=e("form[name=billToForm]"),t=!1;return e.ajax({url:"?option=com_virtuemart&view=cart&opc_task=register",type:"POST",dataType:"JSON",data:a.serializeFormJSON(),async:!1,cache:!1,success:function(e){"true"==e?t=!0:(t=!1,alert(Joomla.JText._("SYSTEM_ONESTEPCHECKOUT_RISGISTER_ERROR")+"\r\n"+e.message),getDesignOpc())}}),t}},e(document).ready(function(){if($cache={opcwapperElement:e("#opc-wapper"),userShipToElement:e("input[name=userShipTo]"),loginPopupElement:e(".LoginPopup"),inputTosElement:e("input.required[name=tos]"),createAccountElement:e("input[name=checkCreateAcount]"),noticeElement:e("#notice-login").children("p"),checkminiumvalue:!0},checkUseShipTo(),e(window).resize(function(){getDesignOpc()}),preventPaymentFormSubmit(),$cache.userShipToElement.click(function(){checkUseShipTo(),0==e(this).is(":checked")?e("#STsameAsBT").val(0):e("#STsameAsBT").val(1),OPCCMSMART.useShipTo(e(this).is(":checked"))}),$cache.createAccountElement.click(function(){jQuery(this).is(":checked")?jQuery("form#billToForm").find("div.user-info").show():jQuery("form#billToForm").find("div.user-info").hide(),getDesignOpc()}),e(document).on("click",".logIn-popup",function(){e('<div class="overlayLogin"></div>').appendTo("#opc-wapper");var a=e(window).width(),t=e(window).height();a<320?$cache.loginPopupElement.css("left","5px"):$cache.loginPopupElement.css("left",(a-310)/2),t<320?$cache.loginPopupElement.css("top","10px"):$cache.loginPopupElement.css("top","50px"),$cache.loginPopupElement.css("display","block")}),e(document).on("click",".close-logIn",function(){e("body .overlayLogin").remove(),$cache.loginPopupElement.css("display","none")}),e(document).on("click",".overlayLogin",function(){e(this).remove(),$cache.loginPopupElement.css("display","none")}),e(window).resize(function(){var a=e(window).width(),t=e(window).height();a<320?$cache.loginPopupElement.css("left","5px"):$cache.loginPopupElement.css("left",(a-310)/2),t<350?$cache.loginPopupElement.css("top","10px"):$cache.loginPopupElement.css("top","50px")}),e(document).on("click","#submit-login",function(){OPCCMSMART.loginForm()}),e(document).on("keyup","#logInForm input[name=username]",function(e){13==e.keyCode&&OPCCMSMART.loginForm()}),e(document).on("keyup","#logInForm input[name=password]",function(e){13==e.keyCode&&OPCCMSMART.loginForm()}),e(document).on("click","#submit-logout",function(){OPCCMSMART.logoutForm()}),e(document).on("change","input[name=virtuemart_shipmentmethod_id]",function(){OPCCMSMART.selectShipment()}),e(document).on("change","input[name=virtuemart_paymentmethod_id]",function(){OPCCMSMART.selectPayment()}),e(document).on("change","#opc-payment",function(){var a=!0;selected=e(this).find('[name="virtuemart_paymentmethod_id"]:checked').parent(".opc-payment"),selected.find('input[type!="hidden"]').each(function(){e(this).val()||(a=!1)}),ccMonth=selected.find('[name^="cc_expire_month"]'),ccMonth.length&&(ccYearVal=selected.find('[name^="cc_expire_year"]').val(),ccMonthVal=ccMonth.val(),curDate=new Date,ccMonthVal<=curDate.getMonth()&&ccYearVal<=curDate.getFullYear()&&(a=!1)),a&&(jQuery("#wk_stripe_card_info").length?(jQuery("#wk_stripe_card_info").clone().appendTo("#opc-submit-button"),jQuery("#strp-pay-button").click()):OPCCMSMART.selectPayment())}),e(document).on("change","input[name=zip]",function(){OPCCMSMART.saveBillTo()}),e(document).on("change","select[name=virtuemart_country_id]",function(){OPCCMSMART.saveBillTo()}),e(document).on("change","select[name=virtuemart_state_id]",function(){OPCCMSMART.saveBillTo()}),e(document).on("change","input[name=shipto_zip]",function(){OPCCMSMART.saveShipTo()}),e(document).on("change","select[name=shipto_virtuemart_country_id]",function(){OPCCMSMART.saveShipTo()}),e(document).on("change","select[name=shipto_virtuemart_state_id]",function(){OPCCMSMART.saveShipTo()}),e(document).on("change","input[name=email]",function(){validateEmail(e(this).val())||(alert(Joomla.JText._("SYSTEM_ONESTEPCHECKOUT_NOT_EMAIL")),e(this).val(""))}),e(document).on("click","span#submit_order_done",function(){var e=jQuery(this);e.hasClass("processing")||(e.addClass("processing"),checkFormCheckout()||e.removeClass("processing"))}),e(document).on("change","input.quantity_product",function(){var a=e(this).val();(isNaN(a)||0==parseInt(a))&&e(this).val(1)}),e(document).on("click","span.update-quantity",function(){OPCCMSMART.updateProduct()}),e(document).on("click","span.delete-product-cart",function(){var a=e(this).attr("data-pid");OPCCMSMART.deleteProduct(a)}),e(document).on("click","span#addCouponCode",function(){var a=e("input[name=coupon_code]").val();OPCCMSMART.saveCouponCode(a)}),"undefined"!=typeof opc_country_id&&opc_country_id>0){var a=opc_country_id,t=document.getElementById("virtuemart_country_id"),o=document.getElementById("shipto_virtuemart_country_id");if(null===t&&(t=document.getElementById("virtuemart_country_id_field")),null===o&&(o=document.getElementById("shipto_virtuemart_country_id_field")),t&&o)for(var c,r=0;c=t.options[r];r++)if(c.value==a){t.selectedIndex=r,o.selectedIndex=r,jQuery("#virtuemart_country_id_field").trigger("liszt:updated"),jQuery("#virtuemart_country_id").trigger("liszt:updated"),jQuery("#shipto_virtuemart_country_id_field").trigger("liszt:updated"),jQuery("#shipto_virtuemart_country_id").trigger("liszt:updated"),setTimeout(function(){OPCCMSMART.saveBillTo()},1e3);break}}"undefined"!=typeof opc_country_id&&""!=opc_city&&(e("#city_field").val(opc_city),e("#shipto_city_field").val(opc_city)),e.fn.serializeFormJSON=function(){var a={},t=this.serializeArray();return e.each(t,function(){a[this.name]?(a[this.name].push||(a[this.name]=[a[this.name]]),a[this.name].push(this.value||"")):a[this.name]=this.value||""}),a},setTimeout(function(){getDesignOpc()},1)})}(jQuery);